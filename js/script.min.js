(function(e){function t(t){e(".rating-info").html(wp_idea_stream_vars.wait_msg);var r={action:"wp_idea_stream_rate",rate:t,wpnonce:wp_idea_stream_vars.wpnonce,idea:e("#rate").data("idea")};e.post(wp_idea_stream_vars.ajaxurl,r,function(t){if(t&&t>0){e(".rating-info").html(wp_idea_stream_vars.success_msg+" "+t).fadeOut(2e3,function(){n(1);e(this).show()})}else{e(".rating-info").html(wp_idea_stream_vars.error_msg);e.fn.raty("readOnly",false,"#rate")}})}function n(t){var n=Number(wp_idea_stream_vars.rate_nb)+t,r;if(1==n){r=wp_idea_stream_vars.one_rate}else if("0"==n){r=wp_idea_stream_vars.not_rated}else{r=wp_idea_stream_vars.x_rate.replace("%",n)}e(".rating-info").html("<a>"+r+"</a>")}if(typeof wp_idea_stream_vars.raty_loaded!="undefined"){n(0);e("div#rate").raty({cancel:false,half:false,halfShow:true,starType:"i",readOnly:wp_idea_stream_vars.readonly,score:wp_idea_stream_vars.average_rate,targetKeep:false,noRatedMsg:wp_idea_stream_vars.not_rated,hints:wp_idea_stream_vars.hints,number:wp_idea_stream_vars.hints_nb,click:function(n,r){if(!wp_idea_stream_vars.can_rate){return}e.fn.raty("readOnly",true,"#rate");t(n)}})}if(typeof wp_idea_stream_vars.tagging_loaded!="undefined"){e("#_wp_idea_stream_the_tags").tagging({"tags-input-name":"wp_idea_stream[_the_tags]","edit-on-delete":false,"tag-char":"","no-duplicate-text":wp_idea_stream_vars.duplicate_tag,"forbidden-chars-text":wp_idea_stream_vars.forbidden_chars,"forbidden-words-text":wp_idea_stream_vars.forbidden_words});e("#_wp_idea_stream_the_title").focus();e("#wp_idea_stream_most_used_tags .tag-items a").on("click",function(t){t.preventDefault();e("#_wp_idea_stream_the_tags").tagging("add",e(this).html())});e("#wp-idea-stream-form").on("reset",function(t){e("#_wp_idea_stream_the_tags").tagging("reset")})}if(typeof wp!="undefined"&&typeof wp.heartbeat!="undefined"&&typeof wp_idea_stream_vars.pulse!="undefined"){wp.heartbeat.interval(wp_idea_stream_vars.pulse);e.fn.extend({"heartbeat-send":function(){return this.bind("heartbeat-send.ideastream")}})}e(document).on("heartbeat-send.ideastream",function(e,t){t["ideastream_heartbeat_current_idea"]=wp_idea_stream_vars.idea_id});e(document).on("heartbeat-tick",function(t,n){if(!n["ideastream_heartbeat_response"])return;if(!e("#wp-idea-stream .message").length){e("#wp-idea-stream").prepend('<div class="message info">'+"<p>"+wp_idea_stream_vars.warning+"</p>"+"</div>")}else{e("#wp-idea-stream .message").removeClass("error").addClass("info");e("#wp-idea-stream .message p").html(wp_idea_stream_vars.warning)}e('#wp-idea-stream .submit input[name="wp_idea_stream[save]"]').remove()});if(typeof wp_idea_stream_vars.profile_editing!="undefined"){e("#wp_idea_stream_profile_description").show();e('textarea[name="wp_idea_stream_profile[description]"]').hide();e("#wp_idea_stream_profile_form").on("submit",function(t){e('textarea[name="wp_idea_stream_profile[description]"]').val(e("#wp_idea_stream_profile_description").html())})}if(typeof wp_idea_stream_vars.is_admin!="undefined"){function r(t,n){e("#group-selected").html('<input type="checkbox" name="_ideastream_group_id" id="_ideastream_group_id" value="'+n.item.value+'" checked><strong class="label"><a href="'+n.item.link+'">'+n.item.label+"</a></strong></input>")}e("#wp_idea_stream_buddypress_group").autocomplete({source:ajaxurl+"?action=ideastream_search_groups&user_id="+wp_idea_stream_vars.author,delay:500,minLength:2,position:"undefined"!==typeof isRtl&&isRtl?{my:"right top",at:"right bottom",offset:"0, -1"}:{offset:"0, -1"},open:function(){e(this).addClass("open")},close:function(){e(this).removeClass("open");e(this).val("")},select:function(e,t){r(e,t)}})}})(jQuery)
